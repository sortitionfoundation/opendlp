{#
ABOUTME: Card component macros for backoffice design system
ABOUTME: Supports simple cards and composed cards with body/footer sections
#}

{% macro card(title="", subtitle="", id="", classes="", container_classes="", header_classes="", body_classes="", composed=false) %}
    {#
Card component using semantic design tokens.

Args:
  title: Optional card title
  subtitle: Optional card subtitle
  id: Optional id attribute
  classes: Additional CSS classes for the card (alias for container_classes)
  container_classes: Additional CSS classes for the outer container
  header_classes: Additional CSS classes for the header section
  body_classes: Additional CSS classes for the body section
  composed: If true, disables auto body wrapping for explicit composition

Simple usage (auto body):
  {% call card(title="Card Title") %}
    Card content here
  {% endcall %}

With custom classes for alignment in grids:
  {% call card(title="Card Title", container_classes="flex flex-col h-full", body_classes="flex-1 flex flex-col") %}
    <p>Content</p>
    <div class="mt-auto">Bottom-aligned content</div>
  {% endcall %}

Composed usage (with card_body and card_footer):
  {% call card(title="Card Title", composed=true) %}
    {% call card_body() %}
      Card content here
    {% endcall %}
    {% call card_footer() %}
      {{ button("Action", variant="primary") }}
    {% endcall %}
  {% endcall %}
    #}
    <div
        {% if id %}id="{{ id }}"{% endif %}
        style="background-color: var(--color-tables-cards); border: 1px solid var(--color-borders-dividers);"
        class="rounded-lg shadow-md overflow-hidden {{ classes }} {{ container_classes }}"
    >
        {% if title %}
            <div style="border-bottom: 1px solid var(--color-borders-dividers);" class="px-6 py-4 {{ header_classes }}">
                <h3 style="color: var(--color-headings);" class="text-heading-lg">{{ title }}</h3>
                {% if subtitle %}
                    <p style="color: var(--color-secondary-text);" class="text-body-sm mt-1">{{ subtitle }}</p>
                {% endif %}
            </div>
        {% endif %}
        {% if composed %}
            {{ caller() }}
        {% else %}
            <div class="px-6 py-4 {{ body_classes }}">
                {{ caller() }}
            </div>
        {% endif %}
    </div>
{% endmacro %}


{% macro card_body() %}
    {#
Card body section for use with composed cards.

Usage:
  {% call card_body() %}
    Content here
  {% endcall %}
    #}
    <div class="px-6 py-4">
        {{ caller() }}
    </div>
{% endmacro %}


{% macro card_footer() %}
    {#
Card footer section for actions, used with composed cards.

Usage:
  {% call card_footer() %}
    {{ button("Action", variant="primary") }}
  {% endcall %}
    #}
    <div style="border-top: 1px solid var(--color-borders-dividers);" class="px-6 py-3 flex gap-2 justify-end">
        {{ caller() }}
    </div>
{% endmacro %}


{% macro link_card(href, title="", subtitle="", id="", classes="", container_classes="", header_classes="", body_classes="") %}
    {#
Clickable card component that navigates to a URL when clicked.

Args:
  href: URL to navigate to when clicked (required)
  title: Optional card title
  subtitle: Optional card subtitle
  id: Optional id attribute
  classes: Additional CSS classes for the card
  container_classes: Additional CSS classes for the outer container
  header_classes: Additional CSS classes for the header section
  body_classes: Additional CSS classes for the body section

Usage:
  {% call link_card(href="/some-page", title="Card Title") %}
    Card content here
  {% endcall %}
    #}
    <a
        href="{{ href }}"
        {% if id %}id="{{ id }}"{% endif %}
        style="background-color: var(--color-tables-cards); border: 1px solid var(--color-borders-dividers); display: block; text-decoration: none; color: inherit; transition: box-shadow 0.2s ease, border-color 0.2s ease;"
        class="rounded-lg shadow-md overflow-hidden hover:shadow-lg {{ classes }} {{ container_classes }}"
        onmouseover="this.style.borderColor='var(--color-primary-button)'"
        onmouseout="this.style.borderColor='var(--color-borders-dividers)'"
    >
        {% if title %}
            <div style="border-bottom: 1px solid var(--color-borders-dividers);" class="px-6 py-4 {{ header_classes }}">
                <h3 style="color: var(--color-headings);" class="text-heading-lg">{{ title }}</h3>
                {% if subtitle %}
                    <p style="color: var(--color-secondary-text);" class="text-body-sm mt-1">{{ subtitle }}</p>
                {% endif %}
            </div>
        {% endif %}
        <div class="px-6 py-4 {{ body_classes }}">
            {{ caller() }}
        </div>
    </a>
{% endmacro %}
