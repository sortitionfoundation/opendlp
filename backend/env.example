# this is the template for the .env file
# copy it to `.env` and edit is as required

# disable the warning about unused variables
# shellcheck disable=SC2034
# vi: ft=sh

FLASK_APP="src/opendlp/entrypoints/flask_app.py"

# Database Configuration
# Option 1: Use DATABASE_URL (recommended)
# DATABASE_URL=postgresql://user:password@host:port/database  # pragma: allowlist secret
# Option 2: Use individual variables
DB_HOST=localhost
DB_PORT=54321
DB_NAME=opendlp
DB_USER=opendlp
DB_PASSWORD=abc123

# Redis Configuration (for sessions)
REDIS_HOST=localhost
REDIS_PORT=63791

# Two-Factor Authentication
# Encryption key for storing TOTP secrets (32-byte base64-encoded key)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# REQUIRED before users can enable 2FA
TOTP_ENCRYPTION_KEY=

# Flask Configuration
SECRET_KEY=your-secret-key-here
# valid values: development, production, testing, testing_postgres, testing_sqlite
FLASK_ENV=development
# this will automatically be false if FLASK_ENV=production
DEBUG=false

# i18n/l10n Configuration
# Supported languages (comma-separated language codes)
SUPPORTED_LANGUAGES=en,es,fr,de
# Default locale for Babel
BABEL_DEFAULT_LOCALE=en
# Default timezone for Babel
BABEL_DEFAULT_TIMEZONE=UTC

# OAuth Configuration (optional)
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_MICROSOFT_CLIENT_ID=
OAUTH_MICROSOFT_CLIENT_SECRET=
# Microsoft OAuth client secret expiry date (format: YYYY-MM-DD)
# Used by health check endpoint to monitor secret expiration and provide alerting
# Find the expiry date in Azure Portal > App registrations > Certificates & secrets
OAUTH_MICROSOFT_CLIENT_SECRET_EXPIRY=

# Application Settings
# Application URL for generating absolute links
APPLICATION_URL=https://opendlp.example.com
# Overall timeout for all celery tasks
TASK_TIMEOUT_HOURS=24
# Invite expiry time in hours (default: 168 = 7 days)
INVITE_EXPIRY_HOURS=168

# Logging (optional)
# defaults to INFO
LOG_LEVEL=INFO
# Set to true to log to stdout in production
LOG_TO_STDOUT=false
# set to true to log all requests - will only work if DEBUG is true
LOG_ALL_REQUESTS=false

# When running with opendlp properly installed we need to set this.
# When running locally, or with an editable install, we can leave this unset
# We generally just set it in the Dockerfile, so don't need to explicitly
# set it in the .env file.
# PROJECT_ROOT=/app

# Deployment Configuration
# Subpath deployment (optional) - set if deploying under a subpath like /opendlp
APPLICATION_ROOT=/

# Server name for full URL generation (domain.com or domain.com:port)
# Only needed for unusual setups where reverse proxy headers are not available.
# In most production deployments behind a reverse proxy (Nginx, Caddy, etc),
# leave this empty and ensure the proxy sends X-Forwarded-Host and X-Forwarded-Proto
# headers. See docs/deploy.md for reverse proxy configuration details.
SERVER_NAME=

# Google Spreadsheets related
# This is the path to the JSON file for the Google service account used to
# access Google Spreadsheets
GOOGLE_AUTH_JSON_PATH=

# Which email adapter to use. The options are:
# console - only to be used in dev/test
# smtp - for SMTP servers
# Other options will be added in future
EMAIL_ADAPTER=console

# SMTP options with defaults.
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USERNAME=
# SMTP_PASSWORD=
# SMTP_USE_TLS=true
# SMTP_FROM_EMAIL=
# SMTP_FROM_NAME=
